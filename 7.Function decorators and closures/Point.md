# 第7章函数装饰器和闭包
## 重点
1. 函数装饰器用于在源码中“标记”函数，以某种方式增强函数的行为
2. 装饰器是可调用的对象，其参数是另一个函数，装饰器可能会处理被装饰的函数，然后把它返回，或者将其替换成另一个函数或可调用对象。
3. 装饰器在被装饰的函数定义之后立即运行
4. 使用装饰器改进策略模式
5. 不过，多数装饰器会修改被装饰的函数。通常，它们会定义一个内部函数，然后将其返回，替换被装饰的函数
6. 变量作用域规则，全局变量和局部变量
7. 闭包，闭包指延伸了作用域的函数，其中包含函数定义体中引用，但是不在定义体中定义的非全局变量，关键是能访问定义体之外定义的非全局变量
8. nonlocal声明
9. 嵌套函数实现装饰器
10. 标准库中的装饰器，property，classmethod，staticmethod，functools.wraps复制相关的属性，functools.lru_cache做备忘，把耗时的函数的结果保存起来，避免传入相同的参数时重复计算，可设置两个参数maxsize存储多少个调用结果，typed为True把不同参数类型得到的结果分开保存，functools.singledispatch单分派泛函数
11. 叠放装饰器，按顺序将装饰器应用到函数上
12. 参数化装饰器，多了一层嵌套函数，实际为装饰器工厂函数